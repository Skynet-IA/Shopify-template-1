{% comment %}
  Urban Performance Lab - Product Showcase Section
  Grid de productos destacados con integraci√≥n a Shopify
{% endcomment %}

<section id="shop" class="urban-template py-24 bg-neutral-50/50 text-neutral-900 antialiased">
  <div class="max-w-7xl mx-auto px-6">
    <div class="text-center max-w-2xl mx-auto mb-16">
      {%- if section.settings.subtitle != blank -%}
        <span class="text-xs font-semibold text-neutral-400 uppercase tracking-widest">{{ section.settings.subtitle }}</span>
      {%- endif -%}
      <h2 class="text-3xl font-semibold tracking-tight mt-3 mb-4">{{ section.settings.title | default: 'Latest Arrivals' }}</h2>
      {%- if section.settings.description != blank -%}
        <p class="text-neutral-500 text-sm">{{ section.settings.description }}</p>
      {%- endif -%}
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-12">
      {%- if section.settings.collection != blank -%}
        {%- for product in section.settings.collection.products limit: section.settings.products_limit -%}
          <div class="group">
            <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
              {%- if forloop.first -%}
                <div class="absolute top-3 left-3 bg-black text-white text-[10px] uppercase font-bold px-2 py-1 rounded-sm z-10">New</div>
              {%- elsif forloop.last and section.settings.products_limit > 2 -%}
                <div class="absolute top-3 left-3 bg-neutral-100 text-neutral-600 text-[10px] uppercase font-bold px-2 py-1 rounded-sm z-10">Trending</div>
              {%- endif -%}

              {%- if product.featured_image != blank -%}
                <a href="{{ product.url }}">
                  <img
                    src="{{ product.featured_image | image_url: width: 600 }}"
                    alt="{{ product.title }}"
                    width="{{ product.featured_image.width }}"
                    height="{{ product.featured_image.height }}"
                    class="w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300"
                    loading="lazy"
                  >
                </a>
              {%- else -%}
                {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-contain p-4' }}
              {%- endif -%}
            </div>
            <div class="flex flex-col">
              <a href="{{ product.url }}" class="font-medium text-neutral-900 hover:text-neutral-600 transition-colors">
                {{ product.title }}
              </a>
              <p class="text-neutral-500 text-xs mt-1">{{ product.type }}</p>
              <div class="mt-4 flex items-center justify-between">
                <span class="text-sm font-semibold">{{ product.price | money }}</span>
                {%- form 'product', product, class: 'inline' -%}
                  <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                  <button
                    type="submit"
                    name="add"
                    class="text-xs font-medium border border-neutral-200 bg-white hover:bg-neutral-50 hover:border-neutral-300 px-3 py-1.5 rounded transition-colors"
                    {% unless product.available %}disabled{% endunless %}
                  >
                    {%- if product.available -%}
                      Add to Cart
                    {%- else -%}
                      Sold Out
                    {%- endif -%}
                  </button>
                {%- endform -%}
              </div>
            </div>
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- for i in (1..4) -%}
          <div class="group">
            <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
              {%- if forloop.first -%}
                <div class="absolute top-3 left-3 bg-black text-white text-[10px] uppercase font-bold px-2 py-1 rounded-sm">New</div>
              {%- endif -%}
              {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300' }}
            </div>
            <div class="flex flex-col">
              <h3 class="font-medium text-neutral-900">Product Title</h3>
              <p class="text-neutral-500 text-xs mt-1">Product Type</p>
              <div class="mt-4 flex items-center justify-between">
                <span class="text-sm font-semibold">$99.00</span>
                <span class="text-xs font-medium border border-neutral-200 bg-white px-3 py-1.5 rounded">
                  Add to Cart
                </span>
              </div>
            </div>
          </div>
        {%- endfor -%}
      {%- endif -%}
    </div>

    {%- if section.settings.view_all_link != blank -%}
      <div class="mt-16 text-center">
        <a href="{{ section.settings.view_all_link }}" class="inline-flex items-center gap-2 text-sm font-medium text-neutral-600 hover:text-black transition-colors border-b border-neutral-200 pb-0.5 hover:border-black">
          {{ section.settings.view_all_text | default: 'Browse full catalogue' }}
          <iconify-icon icon="lucide:arrow-right" width="14" stroke-width="1.5"></iconify-icon>
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Urban Products",
  "tag": "section",
  "class": "urban-products-section",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitulo",
      "default": "This Week's Drops"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titulo",
      "default": "Latest Arrivals"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Descripcion",
      "default": "Hand-picked selections from our latest collection."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Coleccion"
    },
    {
      "type": "range",
      "id": "products_limit",
      "label": "Numero de productos",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "Texto ver todo",
      "default": "Browse full catalogue"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "Enlace ver todo"
    }
  ],
  "presets": [
    {
      "name": "Urban Products"
    }
  ]
}
{% endschema %}
