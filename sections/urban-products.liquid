{% comment %}
  Urban Performance Lab - Products Section
  Pixel-perfect copy from plantilla.html
{% endcomment %}

<section id="shop" class="urban-template py-24 bg-neutral-50/50">
  <div class="max-w-7xl mx-auto px-6">
    <div class="text-center max-w-2xl mx-auto mb-16">
      {%- if section.settings.subtitle != blank -%}
        <span class="text-xs font-semibold text-neutral-400 uppercase tracking-widest">
          {{ section.settings.subtitle }}
        </span>
      {%- endif -%}
      <h2 class="text-3xl font-semibold tracking-tight mt-3 mb-4">
        {{ section.settings.title | default: 'Latest Arrivals' }}
      </h2>
      {%- if section.settings.description != blank -%}
        <p class="text-neutral-500 text-sm">
          {{ section.settings.description }}
        </p>
      {%- endif -%}
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-12">
      {%- if section.settings.collection != blank -%}
        {%- for product in section.settings.collection.products limit: section.settings.products_limit -%}
          <div class="group">
            <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
              {%- if forloop.first -%}
                <div class="absolute top-3 left-3 bg-black text-white text-[10px] uppercase font-bold px-2 py-1 rounded-sm z-10">New</div>
              {%- elsif forloop.last and section.settings.products_limit > 2 -%}
                <div class="absolute top-3 left-3 bg-neutral-100 text-neutral-600 text-[10px] uppercase font-bold px-2 py-1 rounded-sm z-10">Trending</div>
              {%- endif -%}
              <a href="{{ product.url }}">
                {%- if product.featured_image != blank -%}
                  <img
                    src="{{ product.featured_image | image_url: width: 600 }}"
                    alt="{{ product.title }}"
                    width="{{ product.featured_image.width }}"
                    height="{{ product.featured_image.height }}"
                    class="w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300"
                    loading="lazy"
                  >
                {%- else -%}
                  {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-contain p-4' }}
                {%- endif -%}
              </a>
            </div>
            <div class="flex flex-col">
              <h3 class="font-medium text-neutral-900">
                <a href="{{ product.url }}" class="hover:text-neutral-600 transition-colors">{{ product.title }}</a>
              </h3>
              <p class="text-neutral-500 text-xs mt-1">{{ product.type }}</p>
              <div class="mt-4 flex items-center justify-between">
                <span class="text-sm font-semibold">{{ product.price | money }}</span>
                <a href="{{ product.url }}" class="text-xs font-medium border border-neutral-200 bg-white hover:bg-neutral-50 hover:border-neutral-300 px-3 py-1.5 rounded transition-colors">
                  {{ section.settings.button_text | default: 'Buy at Nike' }}
                </a>
              </div>
            </div>
          </div>
        {%- endfor -%}
      {%- else -%}
        <!-- Placeholder products matching plantilla.html exactly -->
        <div class="group">
          <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
            <div class="absolute top-3 left-3 bg-black text-white text-[10px] uppercase font-bold px-2 py-1 rounded-sm">New</div>
            <img src="https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?q=80&w=1964&auto=format&fit=crop" alt="Shoe" width="1964" height="1309" class="w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300">
          </div>
          <div class="flex flex-col">
            <h3 class="font-medium text-neutral-900">Dunk Low Retro</h3>
            <p class="text-neutral-500 text-xs mt-1">Men's Shoes</p>
            <div class="mt-4 flex items-center justify-between">
              <span class="text-sm font-semibold">$115.00</span>
              <a href="#" class="text-xs font-medium border border-neutral-200 bg-white hover:bg-neutral-50 hover:border-neutral-300 px-3 py-1.5 rounded transition-colors">Buy at Nike</a>
            </div>
          </div>
        </div>

        <div class="group">
          <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
            <img src="https://images.unsplash.com/photo-1605348532760-6753d2c43329?q=80&w=1887&auto=format&fit=crop" alt="Shoe" width="1887" height="1258" class="w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300">
          </div>
          <div class="flex flex-col">
            <h3 class="font-medium text-neutral-900">Air Zoom Pegasus 40</h3>
            <p class="text-neutral-500 text-xs mt-1">Running Shoes</p>
            <div class="mt-4 flex items-center justify-between">
              <span class="text-sm font-semibold">$130.00</span>
              <a href="#" class="text-xs font-medium border border-neutral-200 bg-white hover:bg-neutral-50 hover:border-neutral-300 px-3 py-1.5 rounded transition-colors">Buy at Nike</a>
            </div>
          </div>
        </div>

        <div class="group">
          <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
            <img src="https://images.unsplash.com/photo-1584735174965-48c48d7edfde?q=80&w=1887&auto=format&fit=crop" alt="Shoe" width="1887" height="1258" class="w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300">
          </div>
          <div class="flex flex-col">
            <h3 class="font-medium text-neutral-900">Metcon 9</h3>
            <p class="text-neutral-500 text-xs mt-1">Training Shoes</p>
            <div class="mt-4 flex items-center justify-between">
              <span class="text-sm font-semibold">$150.00</span>
              <a href="#" class="text-xs font-medium border border-neutral-200 bg-white hover:bg-neutral-50 hover:border-neutral-300 px-3 py-1.5 rounded transition-colors">Buy at Nike</a>
            </div>
          </div>
        </div>

        <div class="group">
          <div class="relative aspect-square bg-white rounded-lg border border-neutral-200 overflow-hidden mb-4">
            <div class="absolute top-3 left-3 bg-neutral-100 text-neutral-600 text-[10px] uppercase font-bold px-2 py-1 rounded-sm">Trending</div>
            <img src="https://images.unsplash.com/photo-1514989940723-e8e51635b782?q=80&w=2070&auto=format&fit=crop" alt="Shoe" width="2070" height="1380" class="w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-300">
          </div>
          <div class="flex flex-col">
            <h3 class="font-medium text-neutral-900">Tech Fleece Hoodie</h3>
            <p class="text-neutral-500 text-xs mt-1">Men's Apparel</p>
            <div class="mt-4 flex items-center justify-between">
              <span class="text-sm font-semibold">$125.00</span>
              <a href="#" class="text-xs font-medium border border-neutral-200 bg-white hover:bg-neutral-50 hover:border-neutral-300 px-3 py-1.5 rounded transition-colors">Buy at Nike</a>
            </div>
          </div>
        </div>
      {%- endif -%}
    </div>

    <div class="mt-16 text-center">
      <a href="{{ section.settings.view_all_link | default: '#' }}" class="inline-flex items-center gap-2 text-sm font-medium text-neutral-600 hover:text-black transition-colors border-b border-neutral-200 pb-0.5 hover:border-black">
        {{ section.settings.view_all_text | default: 'Browse full catalogue' }}
        <iconify-icon icon="lucide:arrow-right" width="14" stroke-width="1.5"></iconify-icon>
      </a>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Urban Products",
  "tag": "section",
  "class": "urban-products-section",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "This Week's Drops"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Latest Arrivals"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Hand-picked selections available at official retailers."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_limit",
      "label": "Products to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Buy at Nike"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View all text",
      "default": "Browse full catalogue"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View all link"
    }
  ],
  "presets": [
    {
      "name": "Urban Products"
    }
  ]
}
{% endschema %}
