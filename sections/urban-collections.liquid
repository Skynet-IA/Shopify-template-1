{% comment %}
  Urban Performance Lab - Collections Section
  Pixel-perfect copy from plantilla.html
{% endcomment %}

<section id="collections" class="urban-template py-24 border-t border-neutral-100">
  <div class="max-w-7xl mx-auto px-6">
    <div class="flex justify-between items-end mb-12">
      <h2 class="text-3xl font-semibold tracking-tight">
        {{ section.settings.title | default: 'Curated Collections' }}
      </h2>
      {%- if section.settings.view_all_link != blank -%}
        <a href="{{ section.settings.view_all_link }}" class="text-sm font-medium text-neutral-500 hover:text-black flex items-center gap-1">
          {{ section.settings.view_all_text | default: 'View all' }}
          <iconify-icon icon="lucide:arrow-up-right" width="16" stroke-width="1.5"></iconify-icon>
        </a>
      {%- endif -%}
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {%- for block in section.blocks -%}
        {%- liquid
          if block.settings.link != blank
            assign card_url = block.settings.link
          elsif block.settings.collection != blank
            assign card_url = block.settings.collection.url
          else
            assign card_url = '#'
          endif
        -%}
        <a href="{{ card_url }}" class="group relative block aspect-[3/4] overflow-hidden rounded-lg bg-neutral-100" {{ block.shopify_attributes }}>
          {%- if block.settings.image != blank -%}
            <img
              src="{{ block.settings.image | image_url: width: 800 }}"
              alt="{{ block.settings.title }}"
              width="{{ block.settings.image.width }}"
              height="{{ block.settings.image.height }}"
              class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              loading="lazy"
            >
          {%- elsif block.settings.collection != blank and block.settings.collection.featured_image != blank -%}
            <img
              src="{{ block.settings.collection.featured_image | image_url: width: 800 }}"
              alt="{{ block.settings.collection.title }}"
              width="{{ block.settings.collection.featured_image.width }}"
              height="{{ block.settings.collection.featured_image.height }}"
              class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              loading="lazy"
            >
          {%- else -%}
            {%- case forloop.index -%}
              {%- when 1 -%}
                <img src="https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?q=80&w=1974&auto=format&fit=crop" alt="Running" width="1974" height="2632" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105">
              {%- when 2 -%}
                <img src="https://images.unsplash.com/photo-1552346154-21d32810aba3?q=80&w=2070&auto=format&fit=crop" alt="Lifestyle" width="2070" height="1380" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105">
              {%- when 3 -%}
                <img src="https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=2070&auto=format&fit=crop" alt="Training" width="2070" height="1380" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105">
              {%- else -%}
                {{ 'collection-1' | placeholder_svg_tag: 'h-full w-full object-cover' }}
            {%- endcase -%}
          {%- endif -%}
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-60"></div>
          <div class="absolute bottom-0 left-0 p-8">
            <h3 class="text-white text-2xl font-medium tracking-tight mb-2">
              {%- if block.settings.title != blank -%}
                {{ block.settings.title }}
              {%- elsif block.settings.collection != blank -%}
                {{ block.settings.collection.title }}
              {%- else -%}
                Collection
              {%- endif -%}
            </h3>
            {%- if block.settings.subtitle != blank -%}
              <p class="text-white/80 text-sm">{{ block.settings.subtitle }}</p>
            {%- endif -%}
          </div>
        </a>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Urban Collections",
  "tag": "section",
  "class": "urban-collections-section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Curated Collections"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View all text",
      "default": "View all"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View all link"
    }
  ],
  "blocks": [
    {
      "type": "collection_card",
      "name": "Collection Card",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Custom title"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "Everyday comfort & style."
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Custom image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Custom link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Urban Collections",
      "blocks": [
        { "type": "collection_card", "settings": { "title": "Running", "subtitle": "Distance, speed, and trail." } },
        { "type": "collection_card", "settings": { "title": "Lifestyle", "subtitle": "Everyday comfort & style." } },
        { "type": "collection_card", "settings": { "title": "Training", "subtitle": "Gym, HIIT, and Crossfit." } }
      ]
    }
  ]
}
{% endschema %}
